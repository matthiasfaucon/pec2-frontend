server {
  listen ${NGINX_PORT} default_server;
  listen [::]:${NGINX_PORT} default_server;

  root /usr/share/nginx/html;
  index index.html;

  # Add proper MIME types for Flutter assets
  include /etc/nginx/mime.types;
  types {
    application/wasm wasm;
    application/octet-stream clang;
    application/font-woff woff;
    application/font-woff2 woff2;
  }

  # Handle Flutter routing
  location / {
    try_files $uri $uri/ /index.html;
  }

  # Explicitly handle .env file
  location /assets/.env {
    add_header Content-Type text/plain;
  }

  # Handle other assets
  location /assets/ {
    try_files $uri $uri/ =404;
  }
}